<?xml version="1.0" encoding="UTF-8"?>
<mxfile host="app.diagrams.net" modified="2024-01-01T00:00:00.000Z" agent="AInstein Architecture Diagram" etag="v1" version="21.7.5" type="device">
  <diagram name="System Architecture" id="system-architecture">
    <mxGraphModel dx="1426" dy="794" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />

        <!-- Frontend Layer -->
        <mxCell id="frontend-layer" value="Frontend Layer (React/TypeScript)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=16;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="100" y="50" width="900" height="150" as="geometry" />
        </mxCell>

        <!-- Frontend Components -->
        <mxCell id="chat-interface" value="Chat Interface" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="130" y="90" width="120" height="60" as="geometry" />
        </mxCell>

        <mxCell id="message-bubble" value="Message Bubble&lt;br&gt;(Accuracy Mode)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="280" y="90" width="120" height="60" as="geometry" />
        </mxCell>

        <mxCell id="element-viewer" value="Element Viewer&lt;br&gt;(Archi Integration)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="430" y="90" width="120" height="60" as="geometry" />
        </mxCell>

        <mxCell id="websocket-client" value="WebSocket Client" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="580" y="90" width="120" height="60" as="geometry" />
        </mxCell>

        <mxCell id="state-management" value="Zustand Store" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="730" y="90" width="120" height="60" as="geometry" />
        </mxCell>

        <mxCell id="api-client" value="REST API Client" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="870" y="90" width="100" height="60" as="geometry" />
        </mxCell>

        <!-- Backend Layer -->
        <mxCell id="backend-layer" value="Backend Layer (Node.js/TypeScript)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=16;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="100" y="250" width="900" height="200" as="geometry" />
        </mxCell>

        <!-- Backend Services -->
        <mxCell id="ai-agent" value="AI Agent Service&lt;br&gt;(Orchestration)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="130" y="300" width="120" height="80" as="geometry" />
        </mxCell>

        <mxCell id="archimate-parser" value="ArchiMate Parser&lt;br&gt;(XML Processing)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="280" y="300" width="120" height="80" as="geometry" />
        </mxCell>

        <mxCell id="precise-response" value="Precise Response&lt;br&gt;(Accuracy Engine)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="430" y="300" width="120" height="80" as="geometry" />
        </mxCell>

        <mxCell id="adr-generator" value="ADR Generator&lt;br&gt;(Templates)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="580" y="300" width="120" height="80" as="geometry" />
        </mxCell>

        <mxCell id="git-service" value="Git Service&lt;br&gt;(Version Control)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="730" y="300" width="120" height="80" as="geometry" />
        </mxCell>

        <mxCell id="websocket-server" value="WebSocket Server&lt;br&gt;(Socket.io)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="870" y="300" width="100" height="80" as="geometry" />
        </mxCell>

        <!-- Data Layer -->
        <mxCell id="data-layer" value="Data &amp; Knowledge Layer" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=16;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="100" y="500" width="900" height="150" as="geometry" />
        </mxCell>

        <!-- Data Stores -->
        <mxCell id="archimetal-models" value="ArchiMetal Models&lt;br&gt;(.archimate files)" style="shape=cylinder;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="150" y="540" width="120" height="80" as="geometry" />
        </mxCell>

        <mxCell id="knowledge-base" value="Knowledge Base&lt;br&gt;(AInsteinKB.md)" style="shape=cylinder;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="320" y="540" width="120" height="80" as="geometry" />
        </mxCell>

        <mxCell id="architecture-patterns" value="Architecture Patterns&lt;br&gt;(Knowledge Graph)" style="shape=cylinder;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="490" y="540" width="120" height="80" as="geometry" />
        </mxCell>

        <mxCell id="session-store" value="Session Store&lt;br&gt;(In-Memory)" style="shape=cylinder;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="660" y="540" width="120" height="80" as="geometry" />
        </mxCell>

        <mxCell id="cache" value="Cache Layer&lt;br&gt;(LRU Cache)" style="shape=cylinder;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="830" y="540" width="120" height="80" as="geometry" />
        </mxCell>

        <!-- Connections -->
        <mxCell id="edge1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;exitX=0.5;exitY=1;" edge="1" parent="1" source="websocket-client" target="websocket-server">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="edge2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="ai-agent" target="archimate-parser">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="edge3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="archimate-parser" target="precise-response">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="edge4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="archimate-parser" target="archimetal-models">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="edge5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="ai-agent" target="knowledge-base">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>

  <diagram name="Query Processing Flow" id="query-flow">
    <mxGraphModel dx="1426" dy="794" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />

        <!-- Start -->
        <mxCell id="start" value="User Query" style="ellipse;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="100" y="100" width="100" height="60" as="geometry" />
        </mxCell>

        <!-- Process Steps -->
        <mxCell id="step1" value="WebSocket&lt;br&gt;Reception" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="250" y="100" width="100" height="60" as="geometry" />
        </mxCell>

        <mxCell id="step2" value="Intent&lt;br&gt;Classification" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="400" y="100" width="100" height="60" as="geometry" />
        </mxCell>

        <mxCell id="decision1" value="Requires&lt;br&gt;Model?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="550" y="90" width="100" height="80" as="geometry" />
        </mxCell>

        <mxCell id="step3" value="Load ArchiMate&lt;br&gt;Models" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="700" y="100" width="100" height="60" as="geometry" />
        </mxCell>

        <mxCell id="step4" value="Parse Query&lt;br&gt;Context" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="850" y="100" width="100" height="60" as="geometry" />
        </mxCell>

        <mxCell id="step5" value="Generate&lt;br&gt;Response" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="700" y="250" width="100" height="60" as="geometry" />
        </mxCell>

        <mxCell id="decision2" value="Precision&lt;br&gt;Mode?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="550" y="240" width="100" height="80" as="geometry" />
        </mxCell>

        <mxCell id="step6" value="Add Element&lt;br&gt;IDs" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="400" y="250" width="100" height="60" as="geometry" />
        </mxCell>

        <mxCell id="step7" value="Format&lt;br&gt;Response" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="250" y="250" width="100" height="60" as="geometry" />
        </mxCell>

        <mxCell id="end" value="Send to User" style="ellipse;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="100" y="250" width="100" height="60" as="geometry" />
        </mxCell>

        <!-- Flow Connections -->
        <mxCell id="flow1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="start" target="step1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="flow2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="step1" target="step2">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="flow3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="step2" target="decision1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="flow4" value="Yes" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="decision1" target="step3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="flow5" value="No" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="decision1" target="step5">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="600" y="200" />
              <mxPoint x="750" y="200" />
            </Array>
          </mxGeometry>
        </mxCell>

        <mxCell id="flow6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="step3" target="step4">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="flow7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="step4" target="step5">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="900" y="200" />
              <mxPoint x="750" y="200" />
            </Array>
          </mxGeometry>
        </mxCell>

        <mxCell id="flow8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="step5" target="decision2">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="flow9" value="Yes" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="decision2" target="step6">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="flow10" value="No" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="decision2" target="step7">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="600" y="350" />
              <mxPoint x="300" y="350" />
            </Array>
          </mxGeometry>
        </mxCell>

        <mxCell id="flow11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="step6" target="step7">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="flow12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="step7" target="end">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>

  <diagram name="Element Viewer Flow" id="element-viewer-flow">
    <mxGraphModel dx="1426" dy="794" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />

        <!-- User Interaction -->
        <mxCell id="user-click" value="User Clicks&lt;br&gt;Element ID" style="ellipse;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="100" y="200" width="120" height="60" as="geometry" />
        </mxCell>

        <!-- Frontend Processing -->
        <mxCell id="capture-event" value="Capture Click&lt;br&gt;Event" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="280" y="200" width="100" height="60" as="geometry" />
        </mxCell>

        <mxCell id="extract-data" value="Extract&lt;br&gt;Element ID &amp;&lt;br&gt;Model Name" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="430" y="200" width="100" height="60" as="geometry" />
        </mxCell>

        <mxCell id="open-viewer" value="Open Element&lt;br&gt;Viewer Modal" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="580" y="200" width="100" height="60" as="geometry" />
        </mxCell>

        <!-- API Call -->
        <mxCell id="api-request" value="Fetch Element&lt;br&gt;Details API" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="730" y="200" width="100" height="60" as="geometry" />
        </mxCell>

        <!-- Backend Processing -->
        <mxCell id="load-model" value="Load Model&lt;br&gt;from Cache" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="730" y="320" width="100" height="60" as="geometry" />
        </mxCell>

        <mxCell id="find-element" value="Find Element&lt;br&gt;by ID" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="580" y="320" width="100" height="60" as="geometry" />
        </mxCell>

        <mxCell id="get-relationships" value="Extract&lt;br&gt;Relationships" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="430" y="320" width="100" height="60" as="geometry" />
        </mxCell>

        <mxCell id="format-response" value="Format&lt;br&gt;Response" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="280" y="320" width="100" height="60" as="geometry" />
        </mxCell>

        <!-- Display -->
        <mxCell id="display-details" value="Display Element&lt;br&gt;Information" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="280" y="430" width="100" height="60" as="geometry" />
        </mxCell>

        <mxCell id="show-relationships" value="Show&lt;br&gt;Relationships" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="430" y="430" width="100" height="60" as="geometry" />
        </mxCell>

        <mxCell id="archi-button" value="Open in Archi&lt;br&gt;Button" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="580" y="430" width="100" height="60" as="geometry" />
        </mxCell>

        <!-- Archi Integration -->
        <mxCell id="archi-command" value="Execute Archi&lt;br&gt;Command" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="730" y="430" width="100" height="60" as="geometry" />
        </mxCell>

        <!-- Flow arrows -->
        <mxCell id="ev-flow1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="user-click" target="capture-event">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="ev-flow2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="capture-event" target="extract-data">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="ev-flow3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="extract-data" target="open-viewer">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="ev-flow4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="open-viewer" target="api-request">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="ev-flow5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="api-request" target="load-model">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="ev-flow6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="load-model" target="find-element">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="ev-flow7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="find-element" target="get-relationships">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="ev-flow8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="get-relationships" target="format-response">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="ev-flow9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="format-response" target="display-details">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="ev-flow10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="display-details" target="show-relationships">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="ev-flow11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="show-relationships" target="archi-button">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="ev-flow12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="archi-button" target="archi-command">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>